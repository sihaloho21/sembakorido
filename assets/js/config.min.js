const CONFIG={DEFAULTS:{MAIN_API:"https://script.google.com/macros/s/AKfycbwDmh_cc-J9c0cuzcSThFQBdiZ7lpy3oUjDENZhHW-4UszuKwPB20g6OeRccVsgvp79hw/exec",ADMIN_API:"https://script.google.com/macros/s/AKfycbwDmh_cc-J9c0cuzcSThFQBdiZ7lpy3oUjDENZhHW-4UszuKwPB20g6OeRccVsgvp79hw/exec",VERSION:"4.2.0"},STORAGE_KEYS:{MAIN_API:"sembako_main_api_url",ADMIN_API:"sembako_admin_api_url",GAJIAN_CONFIG:"sembako_gajian_config",REWARD_CONFIG:"sembako_reward_config",STORE_CLOSED:"sembako_store_closed",MARGIN_ALERT:"sembako_margin_alert"},getMainApiUrl(){const manual=localStorage.getItem(this.STORAGE_KEYS.MAIN_API);if(manual)return manual;return this.DEFAULTS.MAIN_API},getAdminApiUrl(){const manual=localStorage.getItem(this.STORAGE_KEYS.ADMIN_API);if(manual)return manual;return this.DEFAULTS.ADMIN_API},setMainApiUrl(url){if(url&&url.trim()){localStorage.setItem(this.STORAGE_KEYS.MAIN_API,url.trim());if(typeof ApiService!=="undefined"){ApiService.clearCache()}return true}return false},setAdminApiUrl(url){if(url&&url.trim()){localStorage.setItem(this.STORAGE_KEYS.ADMIN_API,url.trim());if(typeof ApiService!=="undefined"){ApiService.clearCache()}return true}return false},resetToDefault(type="main"){if(type==="main"){localStorage.removeItem(this.STORAGE_KEYS.MAIN_API)}else if(type==="admin"){localStorage.removeItem(this.STORAGE_KEYS.ADMIN_API)}if(typeof ApiService!=="undefined"){ApiService.clearCache()}},getGajianConfig(){const saved=localStorage.getItem(this.STORAGE_KEYS.GAJIAN_CONFIG);if(saved){try{return JSON.parse(saved)}catch(e){console.error("Error parsing gajian config",e)}}return{targetDay:7,markups:[{minDays:29,rate:.2},{minDays:26,rate:.18},{minDays:23,rate:.16},{minDays:20,rate:.14},{minDays:17,rate:.12},{minDays:14,rate:.1},{minDays:11,rate:.08},{minDays:8,rate:.06},{minDays:3,rate:.04},{minDays:0,rate:.02}],defaultMarkup:.25}},setGajianConfig(config){localStorage.setItem(this.STORAGE_KEYS.GAJIAN_CONFIG,JSON.stringify(config))},getRewardConfig(){const saved=localStorage.getItem(this.STORAGE_KEYS.REWARD_CONFIG);if(saved){try{return JSON.parse(saved)}catch(e){console.error("Error parsing reward config",e)}}return{pointValue:1e4,minPoint:.1,manualOverrides:{}}},setRewardConfig(config){localStorage.setItem(this.STORAGE_KEYS.REWARD_CONFIG,JSON.stringify(config))},getMarginAlertThreshold(){const saved=localStorage.getItem(this.STORAGE_KEYS.MARGIN_ALERT);const parsed=parseFloat(saved);return Number.isFinite(parsed)?parsed:10},setMarginAlertThreshold(value){const parsed=parseFloat(value);if(Number.isFinite(parsed)){localStorage.setItem(this.STORAGE_KEYS.MARGIN_ALERT,String(parsed))}},isStoreClosed(){return localStorage.getItem(this.STORAGE_KEYS.STORE_CLOSED)==="true"},setStoreClosed(closed){localStorage.setItem(this.STORAGE_KEYS.STORE_CLOSED,closed?"true":"false")},getAllConfig(){return{mainApi:this.getMainApiUrl(),adminApi:this.getAdminApiUrl(),gajian:this.getGajianConfig(),reward:this.getRewardConfig(),storeClosed:this.isStoreClosed(),marginAlert:this.getMarginAlertThreshold()}}};