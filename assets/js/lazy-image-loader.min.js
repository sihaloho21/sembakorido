class LazyImageLoader{constructor(e={}){this.options={threshold:e.threshold||.1,rootMargin:e.rootMargin||"50px",placeholderSrc:e.placeholderSrc||'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 300"%3E%3Crect fill="%23f0f0f0" width="400" height="300"/%3E%3C/svg%3E'},this.observer=null,this.images=[],this.init()}init(){"IntersectionObserver"in window?this.setupIntersectionObserver():this.loadAllImages(),this.setupNativeLazyLoading()}setupIntersectionObserver(){const e={threshold:this.options.threshold,rootMargin:this.options.rootMargin};this.observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(this.loadImage(e.target),this.observer.unobserve(e.target))})},e),document.querySelectorAll("img[data-src]").forEach(e=>{this.images.push(e),this.observer.observe(e)})}setupNativeLazyLoading(){document.querySelectorAll("img[data-src]").forEach(e=>{e.setAttribute("loading","lazy")})}loadImage(e){const t=e.getAttribute("data-src"),r=e.getAttribute("data-srcset");t&&(e.src=t),r&&(e.srcset=r),e.removeAttribute("data-src"),e.removeAttribute("data-srcset"),e.classList.add("lazy-loaded"),e.style.animation="fadeIn 0.3s ease-in"}loadAllImages(){document.querySelectorAll("img[data-src]").forEach(e=>{this.loadImage(e)})}destroy(){this.observer&&this.observer.disconnect()}}document.addEventListener("DOMContentLoaded",()=>{window.lazyImageLoader=new LazyImageLoader({threshold:.1,rootMargin:"50px"})}),"undefined"!=typeof module&&module.exports&&(module.exports=LazyImageLoader);